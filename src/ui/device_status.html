<!doctype html>
<html lang="en">
	<head>

  <check if="{{ @ENV=='PROD' }}">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162283439-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-162283439-1');
  </script>
  </check>

		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <check if="{{ @ENV == 'DEV' }}">
    <true>
      <base href="{{ @SCHEME.'://'.@HOST.':'.@PORT.@BASE.'/'.@UI }}">
    </true>
    <false>
      <base href="{{ @SCHEME.'://'.@HOST.@BASE.'/'.@UI }}">
    </false>
  </check>

		<!-- Bootstrap CSS -->
		<!--link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">

		<title>Statuslight Online - Device</title>
	</head>
	<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">Statuslight Online</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarColor02">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/device/status">Devices <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/profile">Profile</a>
      </li>
    </ul>
  </div>
</nav>

		<div id="statusContainer" class="container vh-100" style="padding-top: 1rem;">

      		<p>Hello {{ @SESSION.name }}!</p>
      		<check if="{{ @status }}">
      			<p>Your have logged in with {{ trim(@service) }}. Your status is {{ trim(@status) }}.</p>
      		</check>

      		<check if="{{ @no_devices_yet }}">
				<true>
					<p>To make your status visible, you need to register a device. If you have one already, click on the link bellow and follow the steps.</p>
				</true>
				<false>
					<check if="{{ count(@active_devices) > 0 }}">
						<p>Your active devices:</p>

						<table class="table">
						  <thead>
						    <tr>
						      <th scope="col"><span data-toggle="tooltip" data-placement="top" title="" data-original-title="We can get more information if the device supports the homie convention.">Type*</span></th>
						      <th scope="col">Color</th>
						      <th scope="col">Id</th>
						      <th scope="col">State</th>
						      <th scope="col">Wifi network</th>
						      <th scope="col">Last seen</th>
						    </tr>
						  </thead>
						  <tbody>
							<repeat group="{{ @active_devices }}" value="{{ @device }}">
							    <tr>
							      <td>{{ trim(@device.type) }}</td>
							      <td><span style="background-color: {{ trim(@device.color) }};">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
							      <td>{{ trim(@device.id) }}</td>
							      <td>{{ trim(@device.clientState) }}</td>
							      <td>{{ trim(@device.network) }}</td>
							      <td>{{ trim(@device.lastSeen) }}</td>
							    </tr>
							</repeat>
						  </tbody>
						</table>

					</check>
					<check if="{{ count(@pending_devices) > 0 }}">
						<p>Your can activate your new device with the bellow PIN code(s):</p>
						<repeat group="{{ @pending_devices }}" value="{{ @device }}">
						    <li><b>{{ trim(@device.pin) }}</b> - valid til: {{ trim(@device.validity) }}</li>
						</repeat>
					</check>
				</false>
			</check>
			<br>
			<p><a href="{{ @BASE }}/device/add">Add a new device</a></p>


		</div>

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

		<script>
		$(document).ready(function(){
		  $('[data-toggle="tooltip"]').tooltip();
		});
		</script>

	</body>
</html>

