<!DOCTYPE html>
<html lang="en">

<head>

  <check if="{{ @ENV=='PROD' }}">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','{{ trim(@GOOGLE_TAG_ID) }}');</script>
<!-- End Google Tag Manager -->
  </check>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <check if="{{ @ENV == 'DEV' }}">
    <true>
      <base href="{{ @SCHEME.'://'.@HOST.':'.@PORT.@BASE.'/'.@UI }}">
    </true>
    <false>
      <base href="{{ @SCHEME.'://'.@HOST.@BASE.'/'.@UI }}">
    </false>
  </check>

  <title>Statuslight Online</title>

  <!-- Custom fonts for this theme -->
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Theme CSS -->
  <link href="assets/css/freelancer.css" rel="stylesheet">

</head>

<body id="page-top">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ trim(@GOOGLE_TAG_ID) }}"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="/#page-top">Statuslight Online</a>
      <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="/#login">Login on the phone</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="/device">Use with your own device</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="/#about">About</a>
          </li>
          <!--li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contact">Contact</a>
          </li-->
        </ul>
      </div>
    </div>
  </nav>

  <!-- Masthead -->
  <header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">

<div id="errorAlert" class="alert alert-warning alert-dismissible show" style="display:none;" role="alert">
  <span id="errorText">-</span>
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

      <!-- Masthead Avatar Image -->
      <!-- https://pixabay.com/illustrations/home-office-flat-computer-desk-4588697/ -->
      <img class="masthead-avatar mb-5" src="assets/img/circle-cropped.png" alt="">

      <!-- Masthead Subheading -->
      <p class="masthead-subheading font-weight-light mb-0">You are working in home office &#127969; &#128187;</p>
      <p class="masthead-subheading font-weight-light mb-0">Your family &#128106; is around and you get distracted &#129379; &#129380; &#129337;</p>
      <p class="masthead-subheading font-weight-light mb-0">That makes you go crazy &#9889; &#128545;</p>

      <!-- Icon Divider -->
      <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-traffic-light"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Masthead Heading -->
      <h1 class="masthead-heading text-uppercase mb-0">Make your status visible</h1>

      <!-- Icon Divider -->
      <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-traffic-light"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Intro Section Content -->
      <div class="row">
        <div class="col-lg-4 ml-auto">
          <img class="img-fluid" src="assets/img/story2_small.png" style="max-width: 80%;">
          <p class="lead" style="padding-top: 1rem">Grab a mobile phone, login bellow to your Teams, Google Calendar or Slack account and put the phone to a visible place. The color will show your status.</p>
          <p class="lead">Your family can then see when you may have some time for them, but they don't disturb you during a meeting.</p>
        </div>
        <div class="col-lg-4 mr-auto">
          <img class="img-fluid" src="assets/img/wemos-led-shield-yellow_small.png"  style="max-width: 80%;">
          <p class="lead" style="padding-top: 1rem">Or with a little hacking you can have your own device that indicates your status. <a href="/device" style="color: white;">Click here to learn more.</a></p>
        </div>
      </div>

    </div>
  </header>

  <!-- Login Section -->
  <section class="page-section portfolio" id="login">
    <div class="container">

      <!-- Login Section Heading -->
      <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Login</h2>

      <!-- Icon Divider -->
      <div class="divider-custom">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- Login Grid Items -->
      <div class="row align-items-center justify-content-center row-cols-3">

        <!-- Login Item 1 -->
        <div class="col-lg-2 col-md-3 col-sm-3 col-3">
          <div class="portfolio-item mx-auto text-center">
            <a id="teamsLogin" href="/#">
              <img class="img-fluid" style="max-width: 80%;" src="assets/img/teams.png" alt="">
            </a>
            <p>Microsoft Teams</p>
          </div>
        </div>

        <!-- Login Item 2 -->
        <div class="col-lg-2 col-md-3 col-sm-3 col-3">
          <div class="portfolio-item mx-auto text-center">
            <a id="gcalLogin" href="/#">
              <img class="img-fluid" style="max-width: 80%;" src="assets/img/gcal.png" alt="">
            </a>
            <p>Google Calendar</p>
          </div>
        </div>

        <!-- Portfolio Item 3 -->
        <div class="col-lg-2 col-md-3 col-sm-3 col-3">
          <div class="portfolio-item mx-auto text-center">
            <a id="slackLogin" href="/#">
              <img class="img-fluid" style="max-width: 80%;" src="assets/img/slack.png" alt="">
            </a>
            <p>Slack</p>
          </div>
        </div>

      </div>
      <!-- /.row -->

    </div>
  </section>

  <!-- About Section -->
  <section class="page-section bg-primary text-white mb-0" id="about">
    <div class="container">

      <!-- About Section Heading -->
      <h2 class="page-section-heading text-center text-uppercase text-white">About</h2>

      <!-- Icon Divider -->
      <div class="divider-custom divider-light">
        <div class="divider-custom-line"></div>
        <div class="divider-custom-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="divider-custom-line"></div>
      </div>

      <!-- About Section Content -->
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <p class="lead">This is a personal project that I created based on the experiences of beeing home for some weeks with my family due to COVID-19.</p>
        </div>
      </div>

    </div>
  </section>

  <!-- Copyright Section -->
  <section class="copyright py-4 text-center text-white">
    <div class="container">
      <small>Copyright &copy; Statuslight Online 2020 | <a href="mailto: statuslight@plugdio.com">statuslight@plugdio.com</a></small>
      <br>
      <small><a href="/privacy-policy.html">Privacy policy</a></small>
    </div>
  </section>

 
  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
  <div class="scroll-to-top d-lg-none position-fixed ">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="/#page-top">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>

  <!-- Bootstrap core JavaScript -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="assets/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="assets/js/freelancer.min.js"></script>

  <script type="text/javascript">
    var getParams = new URLSearchParams(window.location.search)
    if (getParams.has('error')) {
      var errorText = getParams.get('error')
      console.log('Error: ' + errorText)
      $('#errorText').text(errorText);
      $('#errorAlert').show();
    }
    if (getParams.has('test')) {
      var errorText = getParams.get('error')
      console.log('Testing')
//      $('#gcalIcon').show();
    }
  </script>

  <script type="text/javascript">

      var getJSON = function(url, tokenHeader, callback) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        if (tokenHeader != null) {
          xhr.setRequestHeader("authorization", "Bearer " + tokenHeader);
        }
        xhr.responseType = 'json';
        xhr.onload = function() {
          var status = xhr.status;
          if (status === 200) {
//            if (xhr.response.success == true) {
              callback(null, xhr.response);
//            } else {
//              callback(xhr.response.message, xhr.response);
//            }
          } else {
            callback(status, xhr.response);
          }
        };
        xhr.send();
      };

      var getConfig = function() {
        console.log('Getting the config ... ');

        getJSON('{{ @baseAppPath }}/config', null, function(err, data) {
          if (err !== null) {
            console.log('Something went wrong #1: ' + err);
          } else {
            if (data.success == true) {
              $('#teamsLogin').attr("href", data.result.teamsLoginUrlPhone);
              $('#gcalLogin').attr("href", data.result.googleLoginUrlPhone);
              $('#slackLogin').attr("href", data.result.slackLoginUrlPhone);
            } else {
              console.log('Something went wrong #2: ' + data.message);
            }
          }
        });
      };

      getConfig();
  </script>

</body>

</html>
